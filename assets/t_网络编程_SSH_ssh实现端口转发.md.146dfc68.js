import{_ as s,c as n,o as a,a as l}from"./app.0ce55433.js";const d=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u80CC\u666F","slug":"\u80CC\u666F","link":"#\u80CC\u666F","children":[]},{"level":2,"title":"\u7AEF\u53E3\u5B9E\u73B0","slug":"\u7AEF\u53E3\u5B9E\u73B0","link":"#\u7AEF\u53E3\u5B9E\u73B0","children":[{"level":3,"title":"ssh \u53C2\u6570\u89E3\u91CA","slug":"ssh-\u53C2\u6570\u89E3\u91CA","link":"#ssh-\u53C2\u6570\u89E3\u91CA","children":[]},{"level":3,"title":"\u793A\u4F8B","slug":"\u793A\u4F8B","link":"#\u793A\u4F8B","children":[]}]},{"level":2,"title":"\u5185\u7F51\u7A7F\u900F\u5B9E\u73B0","slug":"\u5185\u7F51\u7A7F\u900F\u5B9E\u73B0","link":"#\u5185\u7F51\u7A7F\u900F\u5B9E\u73B0","children":[{"level":3,"title":"sshd_config \u4FEE\u6539","slug":"sshd-config-\u4FEE\u6539","link":"#sshd-config-\u4FEE\u6539","children":[]},{"level":3,"title":"\u793A\u4F8B","slug":"\u793A\u4F8B-1","link":"#\u793A\u4F8B-1","children":[]}]}],"relativePath":"t/\u7F51\u7EDC\u7F16\u7A0B/SSH/ssh\u5B9E\u73B0\u7AEF\u53E3\u8F6C\u53D1.md","lastUpdated":1729589704000}'),p={name:"t/\u7F51\u7EDC\u7F16\u7A0B/SSH/ssh\u5B9E\u73B0\u7AEF\u53E3\u8F6C\u53D1.md"},e=l(`<h2 id="\u80CC\u666F" tabindex="-1">\u80CC\u666F <a class="header-anchor" href="#\u80CC\u666F" aria-hidden="true">#</a></h2><ol><li>\u8FDC\u7A0B\u670D\u52A1\u5668\u5BF9\u5916\u670D\u52A1\u7684\u7AEF\u53E3\u5173\u95ED\u5982 redis 6379\uFF0Cmysql\uFF1A3306 \u7B49\uFF0C\u4F46\u662F\u4E0D\u60F3\u5BF9\u5916\u66B4\u6F0F\u7AEF\u53E3\uFF0Cssh\uFF1A22 \u53EF\u4EE5\u767B\u5F55\u8FDC\u7A0B\u670D\u52A1\u5668\uFF0C\u60F3\u5B9E\u73B0\u672C\u5730\u8BBF\u95EE\u8FDC\u7A0B\u670D\u52A1\u3002</li><li>\u516C\u7F51\u8BBF\u95EE\u5185\u90E8\u670D\u52A1\uFF0C\u7AEF\u53E3\u8F6C\u53D1</li></ol><h2 id="\u7AEF\u53E3\u5B9E\u73B0" tabindex="-1">\u7AEF\u53E3\u5B9E\u73B0 <a class="header-anchor" href="#\u7AEF\u53E3\u5B9E\u73B0" aria-hidden="true">#</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">port_proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	PORT=</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">    SSH_TARGET=</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">2 </span><span style="color:#676E95;"># root@198.124.2.3</span></span>
<span class="line"><span style="color:#A6ACCD;">	ssh -f -N -L </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">PORT</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">:127.0.0.1:</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">PORT</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">SSH_TARGET</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">port_close</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	PORT=</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">	lsof -i:</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">PORT</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> awk </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{print $2}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> grep -v PID </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> uniq  </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> xargs </span><span style="color:#82AAFF;">kill</span><span style="color:#A6ACCD;"> -9</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="ssh-\u53C2\u6570\u89E3\u91CA" tabindex="-1">ssh \u53C2\u6570\u89E3\u91CA <a class="header-anchor" href="#ssh-\u53C2\u6570\u89E3\u91CA" aria-hidden="true">#</a></h3><ol><li>-f \u540E\u7AEF\u8FD0\u884C\uFF0C\u5982\u679C\u60F3\u5728\u7EC8\u7AEF\u4E00\u76F4\u963B\u585E\uFF0C\u53EF\u4EE5\u4E0D\u8981\u8FD9\u4E2A\u53C2\u6570</li><li>-N \u7AEF\u53E3\u8F6C\u53D1\uFF0C\u4E0D\u4F1A\u6267\u884C\u8FDC\u7A0B\u547D\u4EE4\u3002Do not execute a remote command. This is useful for just forwarding ports.</li><li>-L \u7AEF\u53E3\u8F6C\u53D1\u53C2\u6570 <ol><li>-L [bind_address:]port:host:hostport</li><li>-L [bind_address:]port:remote_socket</li><li>-L local_socket:host:hostport</li><li>-L local_socket:remote_socket</li></ol></li></ol><h3 id="\u793A\u4F8B" tabindex="-1">\u793A\u4F8B <a class="header-anchor" href="#\u793A\u4F8B" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">.</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/.bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u5EFA\u7ACB\u7AEF\u53E3\u8F6C\u53D1</span></span>
<span class="line"><span style="color:#A6ACCD;">port_proxy 6369 ydl@ydl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u65AD\u5F00\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">port_close 6369</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="\u5185\u7F51\u7A7F\u900F\u5B9E\u73B0" tabindex="-1">\u5185\u7F51\u7A7F\u900F\u5B9E\u73B0 <a class="header-anchor" href="#\u5185\u7F51\u7A7F\u900F\u5B9E\u73B0" aria-hidden="true">#</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">port_gateway</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	LOCAL_PORT=</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">	TARGET_PORT=</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">2</span></span>
<span class="line"><span style="color:#A6ACCD;">	SSH_TARGET=</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">3</span></span>
<span class="line"><span style="color:#A6ACCD;">	ssh -NR 127.0.0.1:</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">TARGET_PORT</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">:127.0.0.1:</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">LOCAL_PORT</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">SSH_TARGET</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="sshd-config-\u4FEE\u6539" tabindex="-1">sshd_config \u4FEE\u6539 <a class="header-anchor" href="#sshd-config-\u4FEE\u6539" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">vim /etc/ssh/sshd_config</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u4FEE\u6539\u5982\u4E0B\uFF1A\uFF08\u5C06\u8FDC\u7A0B\u7AEF\u53E3\u8F6C\u53D1\u7ED1\u5B9A\u5230\u975Eloopback\u5730\u5740\uFF0C\u5141\u8BB8\u8FDC\u7A0B\u4E3B\u673A\u8FDE\u63A5\uFF09</span></span>
<span class="line"><span style="color:#676E95;"># GatewayPorts yes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u91CD\u542Fssh\u670D\u52A1</span></span>
<span class="line"><span style="color:#A6ACCD;">service sshd restart</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="\u793A\u4F8B-1" tabindex="-1">\u793A\u4F8B <a class="header-anchor" href="#\u793A\u4F8B-1" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#82AAFF;">.</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">/.bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u5185\u7F51\u7A7F\u900F</span></span>
<span class="line"><span style="color:#A6ACCD;">port_gateway 80 8080 ydl@ydl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u5916\u7F51\u8BBF\u95EE\u5185\u90E8\u670D\u52A1</span></span>
<span class="line"><span style="color:#A6ACCD;">curl -I http://ydl:8080</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div>`,14),o=[e];function r(c,t,i,D,y,A){return a(),n("div",null,o)}const C=s(p,[["render",r]]);export{d as __pageData,C as default};
